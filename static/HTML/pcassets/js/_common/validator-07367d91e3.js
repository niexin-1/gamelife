~function(t){var e,n,r,a,i,u,c,o,l,s,f,h,d,p,m=[];e={email:function(t){return/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i.test(t)},date:function(t){var e,n,r,a,i,u=/^([1-2]\d{3})([-\/.])?(1[0-2]|0?[1-9])([-\/.])?([1-2]\d|3[01]|0?[1-9])$/;return!!u.test(t)&&(e=u.exec(t),r=+e[1],a=+e[3]-1,i=+e[5],n=new Date(r,a,i),r===n.getFullYear()&&a===n.getMonth()&&i===n.getDate())},mobile:function(t){return/^1[3-9]\d{9}$/.test(t)},tel:function(t){return/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/.test(t)},number:function(e){var n=t.trim(this.$item.attr("min")),r=t.trim(this.$item.attr("max")),a=/^\-?(?:[1-9]\d*|0)(?:[.]\d+)?$/.test(e),i=+e,u=t.trim(this.$item.attr("step"));return n=""===n||isNaN(n)?i-1:+n,r=""===r||isNaN(r)?i+1:+r,u=""===u||isNaN(u)?0:+u,a&&(0>=u?i>=n&&i<=r:0==i/u%1&&i>=n&&i<=r)},range:function(t){return this.number(t)},url:function(){var t="((https?|s?ftp|irc[6s]?|git|afp|telnet|smb):\\/\\/)?",e="([a-z0-9]\\w*(\\:[\\S]+)?\\@)?",n=[t,e,"(?:localhost|(?:[a-z0-9]+(?:[-\\w]*[a-z0-9])?(?:\\.[a-z0-9][-\\w]*[a-z0-9])*)*\\.[a-z]{2,})","(:\\d{1,5})?","(\\/\\S*)?"],r=[t,e,"\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}","(:\\d{1,5})?","(\\/\\S*)?"],a=new RegExp("^"+n.join("")+"$","i"),i=new RegExp("^"+r.join("")+"$","i");return function(t){return a.test(t)||i.test(t)}}(),password:function(t){return this.text(t)},checkbox:function(){return e._checker("checkbox")},radio:function(){return e._checker("radio")},_checker:function(e){var n=this.$item.parents("form").eq(0),r="input[type="+e+'][name="'+this.$item.attr("name")+'"]',a=!1;return t(r,n).each(function(t,e){if(e.checked&&!a)return a=!0}),a},text:function(e){if((e=t.trim(e)).length){var n=parseInt(this.$item.attr("maxlength"),10),r=parseInt(this.$item.attr("minlength"),10);return function(){var t=!0,a=e.length;return r&&(t=a>=r),n&&(t=t&&a<=n),t}()}}},f=function(e,n,r){var a=e.data(),i=a.url,u=a.method||"get",c=a.key||"key",o=h(e),l={};l[c]=o,t[u](i,l).success(function(t){var a=t?"IM VALIDED":"unvalid";return p.call(this,e,n,r,a)}).error(function(){})},d=function(e,n,r){var a="a"===e.data("aorb")?"b":"a",u=t("[data-aorb="+a+"]",e.parents("form").eq(0)),c=[e,n,r],o=[u,n,r],l=0;return l+=p.apply(this,c)?0:1,l+=p.apply(this,o)?0:1,l=l>0?(i.apply(this,c),i.apply(this,o),!1):p.apply(this,c.concat("unvalid"))},p=function(n,r,u,c){if(!n)return"DONT VALIDATE UNEXIST ELEMENT";var o,l,s,f,d;return o=n.attr("pattern"),o&&o.replace("\\","\\\\"),l=n.attr("type")||"text",l=e[l]?l:"text",s=t.trim(h(n)),d=n.data("event"),c=c||(o?new RegExp(o).test(s)||"unvalid":e[l](s)||"unvalid"),"unvalid"===c&&i(n,r,u),/^(?:unvalid|empty)$/.test(c)?(f={$el:a.call(this,n,r,u,c),type:l,error:c},n.trigger("after:"+d,n),f):(i.call(this,n,r,u),n.trigger("after:"+d,n),!1)},n=function(e,n){return t(e,n)},h=function(t){return t.val()||(t.is("[contenteditable]")?t.text():"")},o=function(t,n,r){var a,i,u,c,o,l;return e.$item=t,u=t.attr("type"),c=h(t),a=t.data("url"),i=t.data("aorb"),l=t.data("event"),o=[t,n,r],l&&t.trigger("before:"+l,t),/^(?:radio|checkbox)$/.test(u)||i||e.text(c)?i?d.apply(this,o):a?f.apply(this,o):p.call(this,t,n,r):p.call(this,t,n,r,c.length?"unvalid":"empty")},l=function(e,n,r,a){var i,u=/^radio|checkbox/;t.each(e,function(e,c){t(c).on(u.test(c.type)||"SELECT"===c.tagName?"change blur":n,function(){var e=t(this);u.test(this.type)&&(e=t("input[type="+this.type+"][name="+this.name+"]",e.closest("form"))),e.each(function(){(i=o.call(this,t(this),r,a))&&m.push(i)})})})},c=function(e,n,r,a){return!(!n||l.length)||(m=t.map(e,function(e){var n=o.call(null,t(e),r,a);if(n)return n}),!!l.length&&m)},s=function(e){var n,r;if(n=t.grep(m,function(t){return t.$el=e})[0])return r=t.inArray(n,m),m.splice(r,1),m},r=function(t,e){return t.data("parent")?t.closest(t.data("parent")):e?t.parent():t},a=function(t,e,n,a){return r(t,n).addClass(e+" "+a)},i=function(t,e,n){return s.call(this,t),r(t,n).removeClass(e+" empty unvalid")},u=function(t){return t.attr("novalidate")||t.attr("novalidate","true")},t.fn.validator=function(e){var r=this,a=e||{},o=a.identifie||"[required]",s=a.klass||"error",f=a.isErrorOnParent||!1,h=a.method||"blur",d=a.before||function(){return!0},p=a.after||function(){return!0},v=a.errorCallback||function(){},g=n(o,r);u(r),h&&l.call(this,g,h,s,f),r.on("focusin",o,function(){i.call(this,t(this),"error unvalid empty",f)}),r.on("submit",function(t){return!1===d.call(this,g)?void t.preventDefault():(c.call(this,g,h,s,f),m.length?(t.preventDefault(),v.call(this,m)):p.call(this,t,g))})}}(window.jQuery||window.Zepto);